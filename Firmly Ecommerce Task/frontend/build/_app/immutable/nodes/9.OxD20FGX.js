import{s as ie,n as K,r as oe,o as de,a as te}from"../chunks/BwTpNNqy.js";import{S as ce,i as ue,d as f,k as M,a as H,l as o,m as R,b as u,c as g,g as re,e as V,n as y,o as C,h as v,s as j,t as A,j as fe}from"../chunks/BJj0cEhh.js";import{e as le}from"../chunks/D6YF6ztN.js";import{a as he,P as _e}from"../chunks/B7eymPUq.js";import{b as pe}from"../chunks/DAy7agEw.js";function ae(e,t,r){const l=e.slice();return l[10]=t[r],l}function me(e){let t,r=le(e[0]),l=[];for(let a=0;a<r.length;a+=1)l[a]=se(ae(e,r,a));return{c(){t=v("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){t=g(a,"DIV",{class:!0});var i=y(t);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(f),this.h()},h(){u(t,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6")},m(a,i){H(a,t,i);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(a,i){if(i&49){r=le(a[0]);let s;for(s=0;s<r.length;s+=1){const h=ae(a,r,s);l[s]?l[s].p(h,i):(l[s]=se(h),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(a){a&&f(t),fe(l,a)}}}function ge(e){let t,r="Loading...";return{c(){t=v("p"),t.textContent=r},l(l){t=g(l,"P",{"data-svelte-h":!0}),re(t)!=="svelte-qdsr2u"&&(t.textContent=r)},m(l,a){H(l,t,a)},p:K,d(l){l&&f(t)}}}function se(e){let t,r,l,a,i,s,h,b=e[10].name+"",S,k,w,I,_=e[10].price+"",P,B,p,O=e[10].status+"",U,z,T,E,N=e[4].has(e[10].id)?"Adding...":"Add to Cart",m,n,d,D,q,F,X,Y,Q;function ne(){return e[8](e[10])}return{c(){t=v("div"),r=v("div"),l=v("img"),s=j(),h=v("h2"),S=A(b),k=j(),w=v("p"),I=A("$"),P=A(_),B=j(),p=v("span"),U=A(O),z=j(),T=v("div"),E=v("button"),m=A(N),d=j(),D=v("a"),q=A("View Details"),X=j(),this.h()},l(G){t=g(G,"DIV",{class:!0});var c=y(t);r=g(c,"DIV",{class:!0});var W=y(r);l=g(W,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),W.forEach(f),s=V(c),h=g(c,"H2",{class:!0});var Z=y(h);S=C(Z,b),Z.forEach(f),k=V(c),w=g(c,"P",{class:!0});var J=y(w);I=C(J,"$"),P=C(J,_),J.forEach(f),B=V(c),p=g(c,"SPAN",{class:!0});var $=y(p);U=C($,O),$.forEach(f),z=V(c),T=g(c,"DIV",{class:!0});var L=y(T);E=g(L,"BUTTON",{class:!0});var x=y(E);m=C(x,N),x.forEach(f),d=V(L),D=g(L,"A",{href:!0,class:!0});var ee=y(D);q=C(ee,"View Details"),ee.forEach(f),L.forEach(f),X=V(c),c.forEach(f),this.h()},h(){te(l.src,a=e[10].image_url||"https://via.placeholder.com/150")||u(l,"src",a),u(l,"alt",i=e[10].name),u(l,"class","w-full h-full object-contain"),u(l,"loading","lazy"),u(r,"class","h-48 bg-gray-100 rounded-lg mb-4 overflow-hidden flex items-center justify-center p-2"),u(h,"class","font-semibold text-lg"),u(w,"class","text-gray-700 mt-1"),u(p,"class","text-sm text-gray-500 capitalize mt-1"),u(E,"class","w-full bg-black text-white py-2 rounded disabled:opacity-50"),E.disabled=n=e[10].status!=="active"||e[4].has(e[10].id),u(D,"href",F=`/products/${e[10].id}`),u(D,"class","block text-center border py-2 rounded"),u(T,"class","mt-auto space-y-2 pt-4"),u(t,"class","border rounded-xl p-4 shadow hover:shadow-lg transition flex flex-col")},m(G,c){H(G,t,c),o(t,r),o(r,l),o(t,s),o(t,h),o(h,S),o(t,k),o(t,w),o(w,I),o(w,P),o(t,B),o(t,p),o(p,U),o(t,z),o(t,T),o(T,E),o(E,m),o(T,d),o(T,D),o(D,q),o(t,X),Y||(Q=[R(l,"error",be),R(E,"click",ne)],Y=!0)},p(G,c){e=G,c&1&&!te(l.src,a=e[10].image_url||"https://via.placeholder.com/150")&&u(l,"src",a),c&1&&i!==(i=e[10].name)&&u(l,"alt",i),c&1&&b!==(b=e[10].name+"")&&M(S,b),c&1&&_!==(_=e[10].price+"")&&M(P,_),c&1&&O!==(O=e[10].status+"")&&M(U,O),c&17&&N!==(N=e[4].has(e[10].id)?"Adding...":"Add to Cart")&&M(m,N),c&17&&n!==(n=e[10].status!=="active"||e[4].has(e[10].id))&&(E.disabled=n),c&1&&F!==(F=`/products/${e[10].id}`)&&u(D,"href",F)},d(G){G&&f(t),Y=!1,oe(Q)}}}function ve(e){let t,r="Products",l,a,i,s,h,b,S,k,w,I,_,P,B,p,O,U,z,T;function E(n,d){return n[3]?ge:me}let N=E(e),m=N(e);return{c(){t=v("h1"),t.textContent=r,l=j(),m.c(),a=j(),i=v("div"),s=v("button"),h=A("Previous"),S=j(),k=v("span"),w=A("Page "),I=A(e[1]),_=A(" of "),P=A(e[2]),B=j(),p=v("button"),O=A("Next"),this.h()},l(n){t=g(n,"H1",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-11rnh0f"&&(t.textContent=r),l=V(n),m.l(n),a=V(n),i=g(n,"DIV",{class:!0});var d=y(i);s=g(d,"BUTTON",{class:!0});var D=y(s);h=C(D,"Previous"),D.forEach(f),S=V(d),k=g(d,"SPAN",{});var q=y(k);w=C(q,"Page "),I=C(q,e[1]),_=C(q," of "),P=C(q,e[2]),q.forEach(f),B=V(d),p=g(d,"BUTTON",{class:!0});var F=y(p);O=C(F,"Next"),F.forEach(f),d.forEach(f),this.h()},h(){u(t,"class","text-3xl font-bold mb-6"),s.disabled=b=e[1]===1,u(s,"class","px-4 py-2 border rounded disabled:opacity-50"),p.disabled=U=e[1]===e[2],u(p,"class","px-4 py-2 border rounded disabled:opacity-50"),u(i,"class","flex justify-between items-center mt-10")},m(n,d){H(n,t,d),H(n,l,d),m.m(n,d),H(n,a,d),H(n,i,d),o(i,s),o(s,h),o(i,S),o(i,k),o(k,w),o(k,I),o(k,_),o(k,P),o(i,B),o(i,p),o(p,O),z||(T=[R(s,"click",e[7]),R(p,"click",e[6])],z=!0)},p(n,[d]){N===(N=E(n))&&m?m.p(n,d):(m.d(1),m=N(n),m&&(m.c(),m.m(a.parentNode,a))),d&2&&b!==(b=n[1]===1)&&(s.disabled=b),d&2&&M(I,n[1]),d&4&&M(P,n[2]),d&6&&U!==(U=n[1]===n[2])&&(p.disabled=U)},i:K,o:K,d(n){n&&(f(t),f(l),f(a),f(i)),m.d(n),z=!1,oe(T)}}}const be=e=>e.target.src="https://via.placeholder.com/150";function ke(e,t,r){let l=[],a=1,i=1,s=!1,h=new Set;async function b(){r(3,s=!0);const _=await he(`${_e}/products`,{headers:{"X-Page":String(a)}});r(0,l=_.data),r(2,i=_.totalPages),r(3,s=!1)}async function S(_){r(4,h=new Set(h).add(_));try{await pe(_,1),console.log("Added to cart:",_)}catch(P){P.message.includes("not logged in")?confirm("You need to log in to add items to your cart. Go to login page?")&&(window.location.href="/login"):alert("Failed to add item to cart")}finally{const P=new Set(h);P.delete(_),r(4,h=P)}}function k(){a<i&&(r(1,a++,a),b())}function w(){a>1&&(r(1,a--,a),b())}return de(b),[l,a,i,s,h,S,k,w,_=>S(_.id)]}class Ae extends ce{constructor(t){super(),ue(this,t,ke,ve,ie,{})}}export{Ae as component};
