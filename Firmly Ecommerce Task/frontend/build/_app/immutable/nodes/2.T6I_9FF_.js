import{s as le,n as M,r as ee,a as J}from"../chunks/BwTpNNqy.js";import{S as se,i as ae,d as h,p as K,a as S,l as c,m as $,b as p,c as k,g as A,e as j,n as D,f as L,h as P,s as E,k as z,o as x,t as O,j as re}from"../chunks/BJj0cEhh.js";import{e as Q}from"../chunks/D6YF6ztN.js";import{g as q}from"../chunks/B0c6utUl.js";const ne=!1;async function oe({fetch:a,url:e}){const n=Number(e.searchParams.get("page")??1),s=e.searchParams.get("product_id");let t,o;return s?(t=await a(`https://products-worker.sridhar-89c.workers.dev/products/${s}`),o=await t.json(),{products:[o],page:1,totalPages:1,searchId:s}):(t=await a("https://products-worker.sridhar-89c.workers.dev/products",{headers:{"X-Page":String(n)}}),o=await t.json(),{products:o.data,page:o.page,totalPages:o.totalPages,searchId:null})}const ge=Object.freeze(Object.defineProperty({__proto__:null,load:oe,ssr:ne},Symbol.toStringTag,{value:"Module"}));function R(a,e,n){const s=a.slice();return s[8]=e[n],s}function W(a){let e,n="Clear",s,t;return{c(){e=P("button"),e.textContent=n,this.h()},l(o){e=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-7awvsj"&&(e.textContent=n),this.h()},h(){p(e,"class","border px-4 rounded")},m(o,r){S(o,e,r),s||(t=$(e,"click",a[4]),s=!0)},d(o){o&&h(e),s=!1,t()}}}function ie(a){let e,n=Q(a[0].products),s=[];for(let t=0;t<n.length;t+=1)s[t]=Y(R(a,n,t));return{c(){e=P("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var o=D(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(h),this.h()},h(){p(e,"class","grid grid-cols-1 md:grid-cols-3 gap-6")},m(t,o){S(t,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(t,o){if(o&1){n=Q(t[0].products);let r;for(r=0;r<n.length;r+=1){const f=R(t,n,r);s[r]?s[r].p(f,o):(s[r]=Y(f),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(t){t&&h(e),re(s,t)}}}function ce(a){let e,n="No products found.";return{c(){e=P("p"),e.textContent=n},l(s){e=k(s,"P",{"data-svelte-h":!0}),A(e)!=="svelte-1k0dofz"&&(e.textContent=n)},m(s,t){S(s,e,t)},p:M,d(s){s&&h(e)}}}function Y(a){let e,n,s,t,o,r,f=a[8].name+"",C,y,m,_,v=a[8].price+"",T,w,u,I=a[8].status+"",N,b,i,l,d="View Details",U,V,G;function te(){return a[5](a[8])}return{c(){e=P("div"),n=P("img"),o=E(),r=P("h2"),C=O(f),y=E(),m=P("p"),_=O("$"),T=O(v),w=E(),u=P("span"),N=O(I),i=E(),l=P("button"),l.textContent=d,U=E(),this.h()},l(B){e=k(B,"DIV",{class:!0});var g=D(e);n=k(g,"IMG",{src:!0,alt:!0,class:!0}),o=j(g),r=k(g,"H2",{class:!0});var X=D(r);C=x(X,f),X.forEach(h),y=j(g),m=k(g,"P",{class:!0});var H=D(m);_=x(H,"$"),T=x(H,v),H.forEach(h),w=j(g),u=k(g,"SPAN",{class:!0});var F=D(u);N=x(F,I),F.forEach(h),i=j(g),l=k(g,"BUTTON",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-xhcmp6"&&(l.textContent=d),U=j(g),g.forEach(h),this.h()},h(){J(n.src,s=a[8].image_url)||p(n,"src",s),p(n,"alt",t=a[8].name),p(n,"class","w-full h-48 object-cover object-center mb-4 rounded-xl"),p(r,"class","text-lg font-semibold"),p(m,"class","text-xl font-bold mt-2"),p(u,"class",b="inline-block mt-2 px-3 py-1 text-sm rounded-full "+(a[8].status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600")),p(l,"class","mt-4 w-full border rounded py-2 hover:bg-black hover:text-white"),p(e,"class","border rounded-xl p-4 shadow hover:shadow-lg transition")},m(B,g){S(B,e,g),c(e,n),c(e,o),c(e,r),c(r,C),c(e,y),c(e,m),c(m,_),c(m,T),c(e,w),c(e,u),c(u,N),c(e,i),c(e,l),c(e,U),V||(G=$(l,"click",te),V=!0)},p(B,g){a=B,g&1&&!J(n.src,s=a[8].image_url)&&p(n,"src",s),g&1&&t!==(t=a[8].name)&&p(n,"alt",t),g&1&&f!==(f=a[8].name+"")&&z(C,f),g&1&&v!==(v=a[8].price+"")&&z(T,v),g&1&&I!==(I=a[8].status+"")&&z(N,I),g&1&&b!==(b="inline-block mt-2 px-3 py-1 text-sm rounded-full "+(a[8].status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"))&&p(u,"class",b)},d(B){B&&h(e),V=!1,G()}}}function Z(a){let e,n,s,t,o,r,f,C=a[0].page+"",y,m,_=a[0].totalPages+"",v,T,w,u,I,N,b;return{c(){e=P("div"),n=P("button"),s=O("Previous"),o=E(),r=P("span"),f=O("Page "),y=O(C),m=O(" of "),v=O(_),T=E(),w=P("button"),u=O("Next"),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=D(e);n=k(l,"BUTTON",{class:!0});var d=D(n);s=x(d,"Previous"),d.forEach(h),o=j(l),r=k(l,"SPAN",{class:!0});var U=D(r);f=x(U,"Page "),y=x(U,C),m=x(U," of "),v=x(U,_),U.forEach(h),T=j(l),w=k(l,"BUTTON",{class:!0});var V=D(w);u=x(V,"Next"),V.forEach(h),l.forEach(h),this.h()},h(){p(n,"class","border px-4 py-2 rounded disabled:opacity-50"),n.disabled=t=a[0].page<=1,p(r,"class","px-4 py-2"),p(w,"class","border px-4 py-2 rounded disabled:opacity-50"),w.disabled=I=a[0].page>=a[0].totalPages,p(e,"class","flex justify-center gap-4 mt-10")},m(i,l){S(i,e,l),c(e,n),c(n,s),c(e,o),c(e,r),c(r,f),c(r,y),c(r,m),c(r,v),c(e,T),c(e,w),c(w,u),N||(b=[$(n,"click",a[6]),$(w,"click",a[7])],N=!0)},p(i,l){l&1&&t!==(t=i[0].page<=1)&&(n.disabled=t),l&1&&C!==(C=i[0].page+"")&&z(y,C),l&1&&_!==(_=i[0].totalPages+"")&&z(v,_),l&1&&I!==(I=i[0].page>=i[0].totalPages)&&(w.disabled=I)},d(i){i&&h(e),N=!1,ee(b)}}}function ue(a){let e,n="Products",s,t,o,r,f,C="Search",y,m,_,v,T,w,u=a[0].searchId&&W(a);function I(l,d){return l[0].products.length===0?ce:ie}let N=I(a),b=N(a),i=!a[0].searchId&&Z(a);return{c(){e=P("h1"),e.textContent=n,s=E(),t=P("div"),o=P("input"),r=E(),f=P("button"),f.textContent=C,y=E(),u&&u.c(),m=E(),b.c(),_=E(),i&&i.c(),v=L(),this.h()},l(l){e=k(l,"H1",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-11rnh0f"&&(e.textContent=n),s=j(l),t=k(l,"DIV",{class:!0});var d=D(t);o=k(d,"INPUT",{class:!0,placeholder:!0}),r=j(d),f=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),A(f)!=="svelte-sxki9g"&&(f.textContent=C),y=j(d),u&&u.l(d),d.forEach(h),m=j(l),b.l(l),_=j(l),i&&i.l(l),v=L(),this.h()},h(){p(e,"class","text-3xl font-bold mb-6"),p(o,"class","border p-2 rounded w-64"),p(o,"placeholder","Search by product ID"),p(f,"class","bg-black text-white px-4 rounded"),p(t,"class","flex gap-4 mb-6")},m(l,d){S(l,e,d),S(l,s,d),S(l,t,d),c(t,o),K(o,a[1]),c(t,r),c(t,f),c(t,y),u&&u.m(t,null),S(l,m,d),b.m(l,d),S(l,_,d),i&&i.m(l,d),S(l,v,d),T||(w=[$(o,"input",a[2]),$(f,"click",a[3])],T=!0)},p(l,[d]){d&2&&o.value!==l[1]&&K(o,l[1]),l[0].searchId?u||(u=W(l),u.c(),u.m(t,null)):u&&(u.d(1),u=null),N===(N=I(l))&&b?b.p(l,d):(b.d(1),b=N(l),b&&(b.c(),b.m(_.parentNode,_))),l[0].searchId?i&&(i.d(1),i=null):i?i.p(l,d):(i=Z(l),i.c(),i.m(v.parentNode,v))},i:M,o:M,d(l){l&&(h(e),h(s),h(t),h(m),h(_),h(v)),u&&u.d(),b.d(l),i&&i.d(l),T=!1,ee(w)}}}function de(a,e,n){let{data:s}=e,t="";function o(){t=this.value,n(1,t)}const r=()=>q(`/?product_id=${t}`),f=()=>q("/"),C=_=>q(`/products/${_.id}`),y=()=>q(`/?page=${s.page-1}`),m=()=>q(`/?page=${s.page+1}`);return a.$$set=_=>{"data"in _&&n(0,s=_.data)},[s,t,o,r,f,C,y,m]}class be extends se{constructor(e){super(),ae(this,e,de,ue,le,{data:0})}}export{be as component,ge as universal};
