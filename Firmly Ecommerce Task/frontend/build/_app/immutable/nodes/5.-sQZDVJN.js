import{s as F,n as U,r as H}from"../chunks/BwTpNNqy.js";import{S as J,i as M,d as _,p as P,k as x,a as C,l as c,m as E,q as z,b as d,c as b,g as I,e as y,n as N,o as A,h as g,s as k,t as B}from"../chunks/BJj0cEhh.js";import{g as D}from"../chunks/B0c6utUl.js";import{s as G}from"../chunks/CX-jFBU_.js";function R(i){let s,u;return{c(){s=g("p"),u=B(i[2]),this.h()},l(r){s=b(r,"P",{class:!0});var l=N(s);u=A(l,i[2]),l.forEach(_),this.h()},h(){d(s,"class","mb-4 text-red-600")},m(r,l){C(r,s,l),c(s,u)},p(r,l){l&4&&x(u,r[2])},d(r){r&&_(s)}}}function K(i){let s,u="Login",r,l,a,n,w,p,v,f,h=i[3]?"Logging in…":"Login",L,T,m,O="Register",q,S,o=i[2]&&R(i);return{c(){s=g("h1"),s.textContent=u,r=k(),o&&o.c(),l=k(),a=g("form"),n=g("input"),w=k(),p=g("input"),v=k(),f=g("button"),L=B(h),T=k(),m=g("a"),m.textContent=O,this.h()},l(e){s=b(e,"H1",{class:!0,"data-svelte-h":!0}),I(s)!=="svelte-qxtk4v"&&(s.textContent=u),r=y(e),o&&o.l(e),l=y(e),a=b(e,"FORM",{class:!0});var t=N(a);n=b(t,"INPUT",{type:!0,placeholder:!0,class:!0}),w=y(t),p=b(t,"INPUT",{type:!0,placeholder:!0,class:!0}),v=y(t),f=b(t,"BUTTON",{class:!0});var j=N(f);L=A(j,h),j.forEach(_),T=y(t),m=b(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),I(m)!=="svelte-je7l8w"&&(m.textContent=O),t.forEach(_),this.h()},h(){d(s,"class","text-2xl font-bold mb-6"),d(n,"type","email"),d(n,"placeholder","Email"),d(n,"class","border p-2 rounded w-full"),n.required=!0,d(p,"type","password"),d(p,"placeholder","Password"),d(p,"class","border p-2 rounded w-full"),p.required=!0,d(f,"class","bg-black text-white px-4 py-2 rounded w-full disabled:opacity-50"),f.disabled=i[3],d(m,"href","/register"),d(m,"class","block w-full text-center border border-black px-4 py-2 rounded hover:bg-gray-50"),d(a,"class","space-y-4")},m(e,t){C(e,s,t),C(e,r,t),o&&o.m(e,t),C(e,l,t),C(e,a,t),c(a,n),P(n,i[0]),c(a,w),c(a,p),P(p,i[1]),c(a,v),c(a,f),c(f,L),c(a,T),c(a,m),q||(S=[E(n,"input",i[5]),E(p,"input",i[6]),E(a,"submit",z(i[4]))],q=!0)},p(e,[t]){e[2]?o?o.p(e,t):(o=R(e),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),t&1&&n.value!==e[0]&&P(n,e[0]),t&2&&p.value!==e[1]&&P(p,e[1]),t&8&&h!==(h=e[3]?"Logging in…":"Login")&&x(L,h),t&8&&(f.disabled=e[3])},i:U,o:U,d(e){e&&(_(s),_(r),_(l),_(a)),o&&o.d(e),q=!1,H(S)}}}function Q(i,s,u){let r="",l="",a="",n=!1;async function w(){u(2,a=""),u(3,n=!0);try{const f=await fetch("https://auth-worker.sridhar-89c.workers.dev/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:r,password:l})}),h=await f.json();if(!f.ok)throw new Error(h.error||"Login failed");G.set({user:h,loading:!1}),D("/")}catch(f){u(2,a=f.message)}finally{u(3,n=!1)}}function p(){r=this.value,u(0,r)}function v(){l=this.value,u(1,l)}return[r,l,a,n,w,p,v]}class Z extends J{constructor(s){super(),M(this,s,Q,K,F,{})}}export{Z as component};
