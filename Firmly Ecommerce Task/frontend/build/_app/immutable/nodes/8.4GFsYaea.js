import{s as Ge,n as Ae,o as Ke}from"../chunks/BwTpNNqy.js";import{S as Qe,i as We,d as p,a as se,f as je,b as g,c as o,g as B,h as i,l as t,n as m,e as C,s as P,k as H,o as k,t as x,j as Xe}from"../chunks/BJj0cEhh.js";import{e as qe}from"../chunks/D6YF6ztN.js";import{a as $e,O as Be}from"../chunks/B7eymPUq.js";function Ye({paypal_order_id:a}){return $e(`${Be}/payments/paypal/capture`,{method:"POST",body:{paypal_order_id:a}})}function Re(a,e,l){const r=a.slice();return r[6]=e[l],r}function Ne(a){const e=a.slice(),l=e[5](e[2].shipping_address);return e[9]=l,e}function Ze(a){let e,l,r="Payment Failed",s,n,h,b,d,f="Return to Checkout";return{c(){e=i("div"),l=i("h1"),l.textContent=r,s=P(),n=i("p"),h=x(a[1]),b=P(),d=i("a"),d.textContent=f,this.h()},l(c){e=o(c,"DIV",{class:!0});var u=m(e);l=o(u,"H1",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-12kfhaz"&&(l.textContent=r),s=C(u),n=o(u,"P",{class:!0});var y=m(n);h=k(y,a[1]),y.forEach(p),b=C(u),d=o(u,"A",{href:!0,class:!0,"data-svelte-h":!0}),B(d)!=="svelte-cmgbp0"&&(d.textContent=f),u.forEach(p),this.h()},h(){g(l,"class","text-red-600 text-2xl font-bold mb-4"),g(n,"class","text-gray-600 mb-6"),g(d,"href","/checkout"),g(d,"class","text-blue-600 hover:underline"),g(e,"class","text-center py-20")},m(c,u){se(c,e,u),t(e,l),t(e,s),t(e,n),t(n,h),t(e,b),t(e,d)},p(c,u){u&2&&H(h,c[1])},d(c){c&&p(e)}}}function et(a){let e,l,r='<h1 class="text-green-600 text-3xl font-bold mb-2">Payment Successful ðŸŽ‰</h1> <p class="text-gray-600">Thank you for your order.</p>',s,n,h,b='<a href="/" class="inline-block bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition">Continue Shopping</a>',d=a[2]&&Fe(a);return{c(){e=i("div"),l=i("div"),l.innerHTML=r,s=P(),d&&d.c(),n=P(),h=i("div"),h.innerHTML=b,this.h()},l(f){e=o(f,"DIV",{class:!0});var c=m(e);l=o(c,"DIV",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-157htgu"&&(l.innerHTML=r),s=C(c),d&&d.l(c),n=C(c),h=o(c,"DIV",{class:!0,"data-svelte-h":!0}),B(h)!=="svelte-118jdi3"&&(h.innerHTML=b),c.forEach(p),this.h()},h(){g(l,"class","text-center mb-8"),g(h,"class","mt-8 text-center"),g(e,"class","max-w-3xl mx-auto py-10 px-4")},m(f,c){se(f,e,c),t(e,l),t(e,s),d&&d.m(e,null),t(e,n),t(e,h)},p(f,c){f[2]?d?d.p(f,c):(d=Fe(f),d.c(),d.m(e,n)):d&&(d.d(1),d=null)},d(f){f&&p(e),d&&d.d()}}}function tt(a){let e,l='<p class="text-lg text-gray-600">Finalizing payment...</p>';return{c(){e=i("div"),e.innerHTML=l,this.h()},l(r){e=o(r,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1sno7lg"&&(e.innerHTML=l),this.h()},h(){g(e,"class","flex justify-center items-center py-20")},m(r,s){se(r,e,s)},p:Ae,d(r){r&&p(e)}}}function Fe(a){let e,l,r,s,n="Order ID",h,b,d,f=a[2].id+"",c,u,y,S,V="Date",I,N,z=a[4](a[2].created_at)+"",G,ee,J,O,j,U,ne="Shipping Address",Y,Z,q,E,_e="Payment",oe,K,ie,te=a[2].payment_provider+"",ae,ce,Q,w,_,$=a[2].status+"",W,R,T,F,ve="Items",de,X,xe,le,fe,He="Total",De,me,ge=a[3](a[2].total_amount,a[2].currency)+"",be,L=a[2].shipping_address&&ze(Ne(a)),ue=qe(a[5](a[2].ordered_items)||[]),A=[];for(let v=0;v<ue.length;v+=1)A[v]=Ue(Re(a,ue,v));return{c(){e=i("div"),l=i("div"),r=i("div"),s=i("span"),s.textContent=n,h=P(),b=i("p"),d=x("#"),c=x(f),u=P(),y=i("div"),S=i("span"),S.textContent=V,I=P(),N=i("p"),G=x(z),ee=P(),J=i("div"),O=i("div"),j=i("div"),U=i("h3"),U.textContent=ne,Y=P(),L&&L.c(),Z=P(),q=i("div"),E=i("h3"),E.textContent=_e,oe=P(),K=i("p"),ie=x("Provider: "),ae=x(te),ce=P(),Q=i("p"),w=x("Status: "),_=i("span"),W=x($),R=P(),T=i("div"),F=i("h3"),F.textContent=ve,de=P(),X=i("div");for(let v=0;v<A.length;v+=1)A[v].c();xe=P(),le=i("div"),fe=i("span"),fe.textContent=He,De=P(),me=i("span"),be=x(ge),this.h()},l(v){e=o(v,"DIV",{class:!0});var M=m(e);l=o(M,"DIV",{class:!0});var D=m(l);r=o(D,"DIV",{});var re=m(r);s=o(re,"SPAN",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-1xrw1z"&&(s.textContent=n),h=C(re),b=o(re,"P",{class:!0});var Ie=m(b);d=k(Ie,"#"),c=k(Ie,f),Ie.forEach(p),re.forEach(p),u=C(D),y=o(D,"DIV",{class:!0});var ye=m(y);S=o(ye,"SPAN",{class:!0,"data-svelte-h":!0}),B(S)!=="svelte-b5qpro"&&(S.textContent=V),I=C(ye),N=o(ye,"P",{class:!0});var Te=m(N);G=k(Te,z),Te.forEach(p),ye.forEach(p),D.forEach(p),ee=C(M),J=o(M,"DIV",{class:!0});var Ee=m(J);O=o(Ee,"DIV",{class:!0});var Ce=m(O);j=o(Ce,"DIV",{});var Pe=m(j);U=o(Pe,"H3",{class:!0,"data-svelte-h":!0}),B(U)!=="svelte-102kp5q"&&(U.textContent=ne),Y=C(Pe),L&&L.l(Pe),Pe.forEach(p),Z=C(Ce),q=o(Ce,"DIV",{});var pe=m(q);E=o(pe,"H3",{class:!0,"data-svelte-h":!0}),B(E)!=="svelte-1hakpoc"&&(E.textContent=_e),oe=C(pe),K=o(pe,"P",{class:!0});var we=m(K);ie=k(we,"Provider: "),ae=k(we,te),we.forEach(p),ce=C(pe),Q=o(pe,"P",{class:!0});var Se=m(Q);w=k(Se,"Status: "),_=o(Se,"SPAN",{class:!0});var Le=m(_);W=k(Le,$),Le.forEach(p),Se.forEach(p),pe.forEach(p),Ce.forEach(p),R=C(Ee),T=o(Ee,"DIV",{class:!0});var he=m(T);F=o(he,"H3",{class:!0,"data-svelte-h":!0}),B(F)!=="svelte-putkw3"&&(F.textContent=ve),de=C(he),X=o(he,"DIV",{class:!0});var Me=m(X);for(let Ve=0;Ve<A.length;Ve+=1)A[Ve].l(Me);Me.forEach(p),xe=C(he),le=o(he,"DIV",{class:!0});var ke=m(le);fe=o(ke,"SPAN",{"data-svelte-h":!0}),B(fe)!=="svelte-2fqrek"&&(fe.textContent=He),De=C(ke),me=o(ke,"SPAN",{});var Oe=m(me);be=k(Oe,ge),Oe.forEach(p),ke.forEach(p),he.forEach(p),Ee.forEach(p),M.forEach(p),this.h()},h(){g(s,"class","text-xs text-gray-500 uppercase tracking-wider"),g(b,"class","font-mono font-medium"),g(S,"class","text-xs text-gray-500 uppercase tracking-wider"),g(N,"class","font-medium text-sm"),g(y,"class","text-right"),g(l,"class","bg-gray-50 px-6 py-4 border-b flex justify-between items-center"),g(U,"class","font-semibold mb-2"),g(E,"class","font-semibold mb-2"),g(K,"class","text-sm text-gray-600"),g(_,"class","uppercase font-bold text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded"),g(Q,"class","text-sm text-gray-600"),g(O,"class","grid md:grid-cols-2 gap-6 mb-6"),g(F,"class","font-semibold mb-3"),g(X,"class","space-y-2"),g(le,"class","border-t mt-4 pt-4 flex justify-between font-bold text-lg"),g(T,"class","border-t pt-4"),g(J,"class","p-6"),g(e,"class","bg-white border rounded-lg shadow-sm overflow-hidden")},m(v,M){se(v,e,M),t(e,l),t(l,r),t(r,s),t(r,h),t(r,b),t(b,d),t(b,c),t(l,u),t(l,y),t(y,S),t(y,I),t(y,N),t(N,G),t(e,ee),t(e,J),t(J,O),t(O,j),t(j,U),t(j,Y),L&&L.m(j,null),t(O,Z),t(O,q),t(q,E),t(q,oe),t(q,K),t(K,ie),t(K,ae),t(q,ce),t(q,Q),t(Q,w),t(Q,_),t(_,W),t(J,R),t(J,T),t(T,F),t(T,de),t(T,X);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(X,null);t(T,xe),t(T,le),t(le,fe),t(le,De),t(le,me),t(me,be)},p(v,M){if(M&4&&f!==(f=v[2].id+"")&&H(c,f),M&4&&z!==(z=v[4](v[2].created_at)+"")&&H(G,z),v[2].shipping_address?L?L.p(Ne(v),M):(L=ze(Ne(v)),L.c(),L.m(j,null)):L&&(L.d(1),L=null),M&4&&te!==(te=v[2].payment_provider+"")&&H(ae,te),M&4&&$!==($=v[2].status+"")&&H(W,$),M&44){ue=qe(v[5](v[2].ordered_items)||[]);let D;for(D=0;D<ue.length;D+=1){const re=Re(v,ue,D);A[D]?A[D].p(re,M):(A[D]=Ue(re),A[D].c(),A[D].m(X,null))}for(;D<A.length;D+=1)A[D].d(1);A.length=ue.length}M&4&&ge!==(ge=v[3](v[2].total_amount,v[2].currency)+"")&&H(be,ge)},d(v){v&&p(e),L&&L.d(),Xe(A,v)}}}function ze(a){var _e,oe,K,ie,te,ae,ce,Q;let e,l,r=((_e=a[9])==null?void 0:_e.full_name)+"",s,n,h,b=((oe=a[9])==null?void 0:oe.address_line1)+"",d,f,c,u,y=((K=a[9])==null?void 0:K.city)+"",S,V,I=((ie=a[9])==null?void 0:ie.state)+"",N,z,G=((te=a[9])==null?void 0:te.postal_code)+"",ee,J,O,j=((ae=a[9])==null?void 0:ae.country)+"",U,ne,Y,Z=((ce=a[9])==null?void 0:ce.phone)+"",q,E=((Q=a[9])==null?void 0:Q.address_line2)&&Je(a);return{c(){e=i("address"),l=i("p"),s=x(r),n=P(),h=i("p"),d=x(b),f=P(),E&&E.c(),c=P(),u=i("p"),S=x(y),V=x(", "),N=x(I),z=P(),ee=x(G),J=P(),O=i("p"),U=x(j),ne=P(),Y=i("p"),q=x(Z),this.h()},l(w){e=o(w,"ADDRESS",{class:!0});var _=m(e);l=o(_,"P",{});var $=m(l);s=k($,r),$.forEach(p),n=C(_),h=o(_,"P",{});var W=m(h);d=k(W,b),W.forEach(p),f=C(_),E&&E.l(_),c=C(_),u=o(_,"P",{});var R=m(u);S=k(R,y),V=k(R,", "),N=k(R,I),z=C(R),ee=k(R,G),R.forEach(p),J=C(_),O=o(_,"P",{});var T=m(O);U=k(T,j),T.forEach(p),ne=C(_),Y=o(_,"P",{});var F=m(Y);q=k(F,Z),F.forEach(p),_.forEach(p),this.h()},h(){g(e,"class","not-italic text-gray-600 text-sm")},m(w,_){se(w,e,_),t(e,l),t(l,s),t(e,n),t(e,h),t(h,d),t(e,f),E&&E.m(e,null),t(e,c),t(e,u),t(u,S),t(u,V),t(u,N),t(u,z),t(u,ee),t(e,J),t(e,O),t(O,U),t(e,ne),t(e,Y),t(Y,q)},p(w,_){var $,W,R,T,F,ve,de,X;_&4&&r!==(r=(($=w[9])==null?void 0:$.full_name)+"")&&H(s,r),_&4&&b!==(b=((W=w[9])==null?void 0:W.address_line1)+"")&&H(d,b),(R=w[9])!=null&&R.address_line2?E?E.p(w,_):(E=Je(w),E.c(),E.m(e,c)):E&&(E.d(1),E=null),_&4&&y!==(y=((T=w[9])==null?void 0:T.city)+"")&&H(S,y),_&4&&I!==(I=((F=w[9])==null?void 0:F.state)+"")&&H(N,I),_&4&&G!==(G=((ve=w[9])==null?void 0:ve.postal_code)+"")&&H(ee,G),_&4&&j!==(j=((de=w[9])==null?void 0:de.country)+"")&&H(U,j),_&4&&Z!==(Z=((X=w[9])==null?void 0:X.phone)+"")&&H(q,Z)},d(w){w&&p(e),E&&E.d()}}}function Je(a){let e,l=a[9].address_line2+"",r;return{c(){e=i("p"),r=x(l)},l(s){e=o(s,"P",{});var n=m(e);r=k(n,l),n.forEach(p)},m(s,n){se(s,e,n),t(e,r)},p(s,n){n&4&&l!==(l=s[9].address_line2+"")&&H(r,l)},d(s){s&&p(e)}}}function Ue(a){let e,l,r=(a[6].name||"Item")+"",s,n,h=a[6].quantity+"",b,d,f,c,u=a[3](a[6].price,a[2].currency)+"",y,S;return{c(){e=i("div"),l=i("span"),s=x(r),n=x(" (x"),b=x(h),d=x(")"),f=P(),c=i("span"),y=x(u),S=P(),this.h()},l(V){e=o(V,"DIV",{class:!0});var I=m(e);l=o(I,"SPAN",{});var N=m(l);s=k(N,r),n=k(N," (x"),b=k(N,h),d=k(N,")"),N.forEach(p),f=C(I),c=o(I,"SPAN",{});var z=m(c);y=k(z,u),z.forEach(p),S=C(I),I.forEach(p),this.h()},h(){g(e,"class","flex justify-between text-sm")},m(V,I){se(V,e,I),t(e,l),t(l,s),t(l,n),t(l,b),t(l,d),t(e,f),t(e,c),t(c,y),t(e,S)},p(V,I){I&4&&r!==(r=(V[6].name||"Item")+"")&&H(s,r),I&4&&h!==(h=V[6].quantity+"")&&H(b,h),I&4&&u!==(u=V[3](V[6].price,V[2].currency)+"")&&H(y,u)},d(V){V&&p(e)}}}function lt(a){let e;function l(n,h){return n[0]==="processing"?tt:n[0]==="success"?et:Ze}let r=l(a),s=r(a);return{c(){s.c(),e=je()},l(n){s.l(n),e=je()},m(n,h){s.m(n,h),se(n,e,h)},p(n,[h]){r===(r=l(n))&&s?s.p(n,h):(s.d(1),s=r(n),s&&(s.c(),s.m(e.parentNode,e)))},i:Ae,o:Ae,d(n){n&&p(e),s.d(n)}}}function st(a,e,l){let r="processing",s=null,n=null;return Ke(async()=>{try{const c=new URLSearchParams(window.location.search).get("token");if(!c)throw new Error("Missing PayPal token");const u=await Ye({paypal_order_id:c});if(!(u!=null&&u.success))throw new Error((u==null?void 0:u.error)||"Capture failed");const y=u.order_id;if(y){const S=await $e(`${Be}/orders/${y}`);l(2,n=S)}l(0,r="success")}catch(f){console.error(f),l(1,s=f.message||"Payment failed"),l(0,r="failed")}}),[r,s,n,(f,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c||"USD"}).format(f),f=>f?new Date(f).toLocaleString():"",f=>{if(typeof f=="string")try{return JSON.parse(f)}catch{return null}return f}]}class it extends Qe{constructor(e){super(),We(this,e,st,lt,Ge,{})}}export{it as component};
