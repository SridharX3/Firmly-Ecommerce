import{s as tt,d as u,i as X,e as Me,o as st,n as Ne,a as y,c as d,g as ee,f,m as s,q as m,b as P,h as C,r as k,t as E,k as lt,l as O}from"../chunks/C0j6wI00.js";import{S as at,i as rt,t as Ce,a as De,c as nt,d as Ke,m as Qe,b as We,e as Xe,g as ot}from"../chunks/CSS4gbkW.js";import{e as je}from"../chunks/D6YF6ztN.js";import{B as Ye}from"../chunks/CfZhOsrX.js";import{a as Ze,O as et}from"../chunks/B7eymPUq.js";import{g as it}from"../chunks/B6G-3GFw.js";import{c as ct}from"../chunks/CTLh7-zH.js";function ut({paypal_order_id:n}){return Ze(`${et}/payments/paypal/capture`,{method:"POST",body:{paypal_order_id:n}})}function Fe(n,e,t){const r=n.slice();return r[5]=e[t],r}function He(n){const e=n.slice(),t=e[4](e[1].shipping_address);return e[8]=t,e}function dt(n){let e,t,r="Payment Failed",c,h,p,_,l,o;return l=new Ye({props:{href:"/checkout",ui_button_styles:"text-blue-600 hover:underline",$$slots:{default:[_t]},$$scope:{ctx:n}}}),{c(){e=f("div"),t=f("h1"),t.textContent=r,c=C(),h=f("p"),p=E(Ge),_=C(),Xe(l.$$.fragment),this.h()},l(a){e=d(a,"DIV",{class:!0});var i=m(e);t=d(i,"H1",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-12kfhaz"&&(t.textContent=r),c=P(i),h=d(i,"P",{class:!0});var v=m(h);p=k(v,Ge),v.forEach(u),_=P(i),We(l.$$.fragment,i),i.forEach(u),this.h()},h(){y(t,"class","text-red-600 text-2xl font-bold mb-4"),y(h,"class","text-gray-600 mb-6"),y(e,"class","text-center py-20")},m(a,i){X(a,e,i),s(e,t),s(e,c),s(e,h),s(h,p),s(e,_),Qe(l,e,null),o=!0},p(a,i){const v={};i&512&&(v.$$scope={dirty:i,ctx:a}),l.$set(v)},i(a){o||(De(l.$$.fragment,a),o=!0)},o(a){Ce(l.$$.fragment,a),o=!1},d(a){a&&u(e),Ke(l)}}}function ft(n){let e,t,r='<h1 class="text-green-600 text-3xl font-bold mb-2">Payment Successful ðŸŽ‰</h1> <p class="text-gray-600">Thank you for your order.</p>',c,h,p,_,l,o=n[1]&&ze(n);return _=new Ye({props:{href:"/",ui_button_styles:mt,$$slots:{default:[ht]},$$scope:{ctx:n}}}),{c(){e=f("div"),t=f("div"),t.innerHTML=r,c=C(),o&&o.c(),h=C(),p=f("div"),Xe(_.$$.fragment),this.h()},l(a){e=d(a,"DIV",{class:!0});var i=m(e);t=d(i,"DIV",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-157htgu"&&(t.innerHTML=r),c=P(i),o&&o.l(i),h=P(i),p=d(i,"DIV",{class:!0});var v=m(p);We(_.$$.fragment,v),v.forEach(u),i.forEach(u),this.h()},h(){y(t,"class","text-center mb-8"),y(p,"class","mt-8 text-center"),y(e,"class","max-w-3xl mx-auto py-10 px-4")},m(a,i){X(a,e,i),s(e,t),s(e,c),o&&o.m(e,null),s(e,h),s(e,p),Qe(_,p,null),l=!0},p(a,i){a[1]?o?o.p(a,i):(o=ze(a),o.c(),o.m(e,h)):o&&(o.d(1),o=null);const v={};i&512&&(v.$$scope={dirty:i,ctx:a}),_.$set(v)},i(a){l||(De(_.$$.fragment,a),l=!0)},o(a){Ce(_.$$.fragment,a),l=!1},d(a){a&&u(e),o&&o.d(),Ke(_)}}}function pt(n){let e,t='<p class="text-lg text-gray-600">Finalizing payment...</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(r){e=d(r,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1sno7lg"&&(e.innerHTML=t),this.h()},h(){y(e,"class","flex justify-center items-center py-20")},m(r,c){X(r,e,c)},p:Ne,i:Ne,o:Ne,d(r){r&&u(e)}}}function _t(n){let e;return{c(){e=E("Return to Checkout")},l(t){e=k(t,"Return to Checkout")},m(t,r){X(t,e,r)},d(t){t&&u(e)}}}function ze(n){let e,t,r,c,h="Order ID",p,_,l,o=n[1].id+"",a,i,v,A,x="Date",I,S,F=n[3](n[1].created_at)+"",U,te,z,R,T,B,ne="Shipping Address",Y,Z,L,$,he="Payment",oe,G,ie,se=n[1].payment_provider+"",ae,ce,K,w,g,J=n[1].status+"",Q,M,N,j,ve="Items",ue,W,Ie,le,de,Oe="Total",we,me,ge=n[2](n[1].total_amount,n[1].currency)+"",be,H=n[1].shipping_address&&Be(He(n)),fe=je(n[4](n[1].ordered_items)||[]),V=[];for(let b=0;b<fe.length;b+=1)V[b]=Ue(Fe(n,fe,b));return{c(){e=f("div"),t=f("div"),r=f("div"),c=f("span"),c.textContent=h,p=C(),_=f("p"),l=E("#"),a=E(o),i=C(),v=f("div"),A=f("span"),A.textContent=x,I=C(),S=f("p"),U=E(F),te=C(),z=f("div"),R=f("div"),T=f("div"),B=f("h3"),B.textContent=ne,Y=C(),H&&H.c(),Z=C(),L=f("div"),$=f("h3"),$.textContent=he,oe=C(),G=f("p"),ie=E("Provider: "),ae=E(se),ce=C(),K=f("p"),w=E("Status: "),g=f("span"),Q=E(J),M=C(),N=f("div"),j=f("h3"),j.textContent=ve,ue=C(),W=f("div");for(let b=0;b<V.length;b+=1)V[b].c();Ie=C(),le=f("div"),de=f("span"),de.textContent=Oe,we=C(),me=f("span"),be=E(ge),this.h()},l(b){e=d(b,"DIV",{class:!0});var q=m(e);t=d(q,"DIV",{class:!0});var D=m(t);r=d(D,"DIV",{});var re=m(r);c=d(re,"SPAN",{class:!0,"data-svelte-h":!0}),ee(c)!=="svelte-1xrw1z"&&(c.textContent=h),p=P(re),_=d(re,"P",{class:!0});var xe=m(_);l=k(xe,"#"),a=k(xe,o),xe.forEach(u),re.forEach(u),i=P(D),v=d(D,"DIV",{class:!0});var ye=m(v);A=d(ye,"SPAN",{class:!0,"data-svelte-h":!0}),ee(A)!=="svelte-b5qpro"&&(A.textContent=x),I=P(ye),S=d(ye,"P",{class:!0});var qe=m(S);U=k(qe,F),qe.forEach(u),ye.forEach(u),D.forEach(u),te=P(q),z=d(q,"DIV",{class:!0});var ke=m(z);R=d(ke,"DIV",{class:!0});var Ee=m(R);T=d(Ee,"DIV",{});var $e=m(T);B=d($e,"H3",{class:!0,"data-svelte-h":!0}),ee(B)!=="svelte-102kp5q"&&(B.textContent=ne),Y=P($e),H&&H.l($e),$e.forEach(u),Z=P(Ee),L=d(Ee,"DIV",{});var pe=m(L);$=d(pe,"H3",{class:!0,"data-svelte-h":!0}),ee($)!=="svelte-1hakpoc"&&($.textContent=he),oe=P(pe),G=d(pe,"P",{class:!0});var Se=m(G);ie=k(Se,"Provider: "),ae=k(Se,se),Se.forEach(u),ce=P(pe),K=d(pe,"P",{class:!0});var Ve=m(K);w=k(Ve,"Status: "),g=d(Ve,"SPAN",{class:!0});var Re=m(g);Q=k(Re,J),Re.forEach(u),Ve.forEach(u),pe.forEach(u),Ee.forEach(u),M=P(ke),N=d(ke,"DIV",{class:!0});var _e=m(N);j=d(_e,"H3",{class:!0,"data-svelte-h":!0}),ee(j)!=="svelte-putkw3"&&(j.textContent=ve),ue=P(_e),W=d(_e,"DIV",{class:!0});var Te=m(W);for(let Ae=0;Ae<V.length;Ae+=1)V[Ae].l(Te);Te.forEach(u),Ie=P(_e),le=d(_e,"DIV",{class:!0});var Pe=m(le);de=d(Pe,"SPAN",{"data-svelte-h":!0}),ee(de)!=="svelte-2fqrek"&&(de.textContent=Oe),we=P(Pe),me=d(Pe,"SPAN",{});var Le=m(me);be=k(Le,ge),Le.forEach(u),Pe.forEach(u),_e.forEach(u),ke.forEach(u),q.forEach(u),this.h()},h(){y(c,"class","text-xs text-gray-500 uppercase tracking-wider"),y(_,"class","font-mono font-medium"),y(A,"class","text-xs text-gray-500 uppercase tracking-wider"),y(S,"class","font-medium text-sm"),y(v,"class","text-right"),y(t,"class","bg-gray-50 px-6 py-4 border-b flex justify-between items-center"),y(B,"class","font-semibold mb-2"),y($,"class","font-semibold mb-2"),y(G,"class","text-sm text-gray-600"),y(g,"class","uppercase font-bold text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded"),y(K,"class","text-sm text-gray-600"),y(R,"class","grid md:grid-cols-2 gap-6 mb-6"),y(j,"class","font-semibold mb-3"),y(W,"class","space-y-2"),y(le,"class","border-t mt-4 pt-4 flex justify-between font-bold text-lg"),y(N,"class","border-t pt-4"),y(z,"class","p-6"),y(e,"class","bg-white border rounded-lg shadow-sm overflow-hidden")},m(b,q){X(b,e,q),s(e,t),s(t,r),s(r,c),s(r,p),s(r,_),s(_,l),s(_,a),s(t,i),s(t,v),s(v,A),s(v,I),s(v,S),s(S,U),s(e,te),s(e,z),s(z,R),s(R,T),s(T,B),s(T,Y),H&&H.m(T,null),s(R,Z),s(R,L),s(L,$),s(L,oe),s(L,G),s(G,ie),s(G,ae),s(L,ce),s(L,K),s(K,w),s(K,g),s(g,Q),s(z,M),s(z,N),s(N,j),s(N,ue),s(N,W);for(let D=0;D<V.length;D+=1)V[D]&&V[D].m(W,null);s(N,Ie),s(N,le),s(le,de),s(le,we),s(le,me),s(me,be)},p(b,q){if(q&2&&o!==(o=b[1].id+"")&&O(a,o),q&2&&F!==(F=b[3](b[1].created_at)+"")&&O(U,F),b[1].shipping_address?H?H.p(He(b),q):(H=Be(He(b)),H.c(),H.m(T,null)):H&&(H.d(1),H=null),q&2&&se!==(se=b[1].payment_provider+"")&&O(ae,se),q&2&&J!==(J=b[1].status+"")&&O(Q,J),q&22){fe=je(b[4](b[1].ordered_items)||[]);let D;for(D=0;D<fe.length;D+=1){const re=Fe(b,fe,D);V[D]?V[D].p(re,q):(V[D]=Ue(re),V[D].c(),V[D].m(W,null))}for(;D<V.length;D+=1)V[D].d(1);V.length=fe.length}q&2&&ge!==(ge=b[2](b[1].total_amount,b[1].currency)+"")&&O(be,ge)},d(b){b&&u(e),H&&H.d(),lt(V,b)}}}function Be(n){var he,oe,G,ie,se,ae,ce,K;let e,t,r=((he=n[8])==null?void 0:he.full_name)+"",c,h,p,_=((oe=n[8])==null?void 0:oe.address_line1)+"",l,o,a,i,v=((G=n[8])==null?void 0:G.city)+"",A,x,I=((ie=n[8])==null?void 0:ie.state)+"",S,F,U=((se=n[8])==null?void 0:se.postal_code)+"",te,z,R,T=((ae=n[8])==null?void 0:ae.country)+"",B,ne,Y,Z=((ce=n[8])==null?void 0:ce.phone)+"",L,$=((K=n[8])==null?void 0:K.address_line2)&&Je(n);return{c(){e=f("address"),t=f("p"),c=E(r),h=C(),p=f("p"),l=E(_),o=C(),$&&$.c(),a=C(),i=f("p"),A=E(v),x=E(", "),S=E(I),F=C(),te=E(U),z=C(),R=f("p"),B=E(T),ne=C(),Y=f("p"),L=E(Z),this.h()},l(w){e=d(w,"ADDRESS",{class:!0});var g=m(e);t=d(g,"P",{});var J=m(t);c=k(J,r),J.forEach(u),h=P(g),p=d(g,"P",{});var Q=m(p);l=k(Q,_),Q.forEach(u),o=P(g),$&&$.l(g),a=P(g),i=d(g,"P",{});var M=m(i);A=k(M,v),x=k(M,", "),S=k(M,I),F=P(M),te=k(M,U),M.forEach(u),z=P(g),R=d(g,"P",{});var N=m(R);B=k(N,T),N.forEach(u),ne=P(g),Y=d(g,"P",{});var j=m(Y);L=k(j,Z),j.forEach(u),g.forEach(u),this.h()},h(){y(e,"class","not-italic text-gray-600 text-sm")},m(w,g){X(w,e,g),s(e,t),s(t,c),s(e,h),s(e,p),s(p,l),s(e,o),$&&$.m(e,null),s(e,a),s(e,i),s(i,A),s(i,x),s(i,S),s(i,F),s(i,te),s(e,z),s(e,R),s(R,B),s(e,ne),s(e,Y),s(Y,L)},p(w,g){var J,Q,M,N,j,ve,ue,W;g&2&&r!==(r=((J=w[8])==null?void 0:J.full_name)+"")&&O(c,r),g&2&&_!==(_=((Q=w[8])==null?void 0:Q.address_line1)+"")&&O(l,_),(M=w[8])!=null&&M.address_line2?$?$.p(w,g):($=Je(w),$.c(),$.m(e,a)):$&&($.d(1),$=null),g&2&&v!==(v=((N=w[8])==null?void 0:N.city)+"")&&O(A,v),g&2&&I!==(I=((j=w[8])==null?void 0:j.state)+"")&&O(S,I),g&2&&U!==(U=((ve=w[8])==null?void 0:ve.postal_code)+"")&&O(te,U),g&2&&T!==(T=((ue=w[8])==null?void 0:ue.country)+"")&&O(B,T),g&2&&Z!==(Z=((W=w[8])==null?void 0:W.phone)+"")&&O(L,Z)},d(w){w&&u(e),$&&$.d()}}}function Je(n){let e,t=n[8].address_line2+"",r;return{c(){e=f("p"),r=E(t)},l(c){e=d(c,"P",{});var h=m(e);r=k(h,t),h.forEach(u)},m(c,h){X(c,e,h),s(e,r)},p(c,h){h&2&&t!==(t=c[8].address_line2+"")&&O(r,t)},d(c){c&&u(e)}}}function Ue(n){let e,t,r=(n[5].name||"Item")+"",c,h,p=n[5].quantity+"",_,l,o,a,i=n[2](n[5].price,n[1].currency)+"",v,A;return{c(){e=f("div"),t=f("span"),c=E(r),h=E(" (x"),_=E(p),l=E(")"),o=C(),a=f("span"),v=E(i),A=C(),this.h()},l(x){e=d(x,"DIV",{class:!0});var I=m(e);t=d(I,"SPAN",{});var S=m(t);c=k(S,r),h=k(S," (x"),_=k(S,p),l=k(S,")"),S.forEach(u),o=P(I),a=d(I,"SPAN",{});var F=m(a);v=k(F,i),F.forEach(u),A=P(I),I.forEach(u),this.h()},h(){y(e,"class","flex justify-between text-sm")},m(x,I){X(x,e,I),s(e,t),s(t,c),s(t,h),s(t,_),s(t,l),s(e,o),s(e,a),s(a,v),s(e,A)},p(x,I){I&2&&r!==(r=(x[5].name||"Item")+"")&&O(c,r),I&2&&p!==(p=x[5].quantity+"")&&O(_,p),I&2&&i!==(i=x[2](x[5].price,x[1].currency)+"")&&O(v,i)},d(x){x&&u(e)}}}function ht(n){let e;return{c(){e=E("Continue Shopping")},l(t){e=k(t,"Continue Shopping")},m(t,r){X(t,e,r)},d(t){t&&u(e)}}}function vt(n){let e,t,r,c;const h=[pt,ft,dt],p=[];function _(l,o){return l[0]==="processing"?0:l[0]==="success"?1:2}return e=_(n),t=p[e]=h[e](n),{c(){t.c(),r=Me()},l(l){t.l(l),r=Me()},m(l,o){p[e].m(l,o),X(l,r,o),c=!0},p(l,[o]){let a=e;e=_(l),e===a?p[e].p(l,o):(ot(),Ce(p[a],1,1,()=>{p[a]=null}),nt(),t=p[e],t?t.p(l,o):(t=p[e]=h[e](l),t.c()),De(t,1),t.m(r.parentNode,r))},i(l){c||(De(t),c=!0)},o(l){Ce(t),c=!1},d(l){l&&u(r),p[e].d(l)}}}let Ge=null;const mt="inline-block bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition";function gt(n,e,t){let r="processing",c=null;return st(async()=>{try{const o=new URLSearchParams(window.location.search).get("token");if(!o)throw new Error("Missing PayPal token");const a=await ut({paypal_order_id:o});if(!(a!=null&&a.success))throw new Error((a==null?void 0:a.error)||"Capture failed");const i=a.order_id;if(i){const v=await Ze(`${et}/orders/${i}`);t(1,c=v)}ct.set({loading:!1,error:null,step:"shipping",summary:null,checkoutId:null,savedShippingAddresses:[],savedBillingAddresses:[]}),t(0,r="success")}catch(l){console.error(l),it("/order")}}),[r,c,(l,o)=>new Intl.NumberFormat("en-US",{style:"currency",currency:o||"USD"}).format(l),l=>l?new Date(l).toLocaleString():"",l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return null}return l}]}class Dt extends at{constructor(e){super(),rt(this,e,gt,vt,tt,{})}}export{Dt as component};
