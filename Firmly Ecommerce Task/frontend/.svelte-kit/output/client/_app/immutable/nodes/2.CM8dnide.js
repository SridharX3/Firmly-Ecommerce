import{s as oe,d as b,y as Z,i as S,m as $,p as ie,a as I,c as q,g as re,b as B,q as H,e as x,f as z,h as A,r as j,t as E,n as W,k as ue,l as G,v as ee}from"../chunks/C0j6wI00.js";import{S as ce,i as fe,d as U,t as N,a as y,c as L,m as X,b as F,e as J,g as Q}from"../chunks/CSS4gbkW.js";import{e as te}from"../chunks/D6YF6ztN.js";import{B as K}from"../chunks/CfZhOsrX.js";import{g as T}from"../chunks/B6G-3GFw.js";const _e=!1;async function pe({fetch:a,url:e}){const t=Number(e.searchParams.get("page")??1),s=e.searchParams.get("product_id");let l,u;return s?(l=await a(`https://products-worker.sridhar-89c.workers.dev/products/${s}`),u=await l.json(),{products:[u],page:1,totalPages:1,searchId:s}):(l=await a("https://products-worker.sridhar-89c.workers.dev/products",{headers:{"X-Page":String(t)}}),u=await l.json(),{products:u.data,page:u.page,totalPages:u.totalPages,searchId:null})}const Ee=Object.freeze(Object.defineProperty({__proto__:null,load:pe,ssr:_e},Symbol.toStringTag,{value:"Module"}));function le(a,e,t){const s=a.slice();return s[8]=e[t],s}function de(a){let e;return{c(){e=E("Search")},l(t){e=j(t,"Search")},m(t,s){S(t,e,s)},d(t){t&&b(e)}}}function se(a){let e,t;return e=new K({props:{ui_button_styles:Pe,$$slots:{default:[ge]},$$scope:{ctx:a}}}),e.$on("click",a[4]),{c(){J(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){X(e,s,l),t=!0},p(s,l){const u={};l&2048&&(u.$$scope={dirty:l,ctx:s}),e.$set(u)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function ge(a){let e;return{c(){e=E("Clear")},l(t){e=j(t,"Clear")},m(t,s){S(t,e,s)},d(t){t&&b(e)}}}function me(a){let e,t,s=te(a[0].products),l=[];for(let r=0;r<s.length;r+=1)l[r]=ae(le(a,s,r));const u=r=>N(l[r],1,1,()=>{l[r]=null});return{c(){e=z("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=q(r,"DIV",{class:!0});var i=H(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(b),this.h()},h(){I(e,"class","grid grid-cols-1 md:grid-cols-3 gap-6")},m(r,i){S(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&1){s=te(r[0].products);let o;for(o=0;o<s.length;o+=1){const k=le(r,s,o);l[o]?(l[o].p(k,i),y(l[o],1)):(l[o]=ae(k),l[o].c(),y(l[o],1),l[o].m(e,null))}for(Q(),o=s.length;o<l.length;o+=1)u(o);L()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)y(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)N(l[i]);t=!1},d(r){r&&b(e),ue(l,r)}}}function he(a){let e,t="No products found.";return{c(){e=z("p"),e.textContent=t},l(s){e=q(s,"P",{"data-svelte-h":!0}),re(e)!=="svelte-1k0dofz"&&(e.textContent=t)},m(s,l){S(s,e,l)},p:W,i:W,o:W,d(s){s&&b(e)}}}function $e(a){let e;return{c(){e=E("View Details")},l(t){e=j(t,"View Details")},m(t,s){S(t,e,s)},d(t){t&&b(e)}}}function ae(a){let e,t,s,l,u,r,i=a[8].name+"",o,k,d,m,v=a[8].price+"",w,_,c,P=a[8].status+"",f,M,D,V,h,n;function p(){return a[5](a[8])}return V=new K({props:{ui_button_styles:"mt-4 w-full border rounded py-2 hover:bg-black hover:text-white",$$slots:{default:[$e]},$$scope:{ctx:a}}}),V.$on("click",p),{c(){e=z("div"),t=z("img"),u=A(),r=z("h2"),o=E(i),k=A(),d=z("p"),m=E("$"),w=E(v),_=A(),c=z("span"),f=E(P),D=A(),J(V.$$.fragment),h=A(),this.h()},l(C){e=q(C,"DIV",{class:!0});var g=H(e);t=q(g,"IMG",{src:!0,alt:!0,class:!0}),u=B(g),r=q(g,"H2",{class:!0});var O=H(r);o=j(O,i),O.forEach(b),k=B(g),d=q(g,"P",{class:!0});var R=H(d);m=j(R,"$"),w=j(R,v),R.forEach(b),_=B(g),c=q(g,"SPAN",{class:!0});var Y=H(c);f=j(Y,P),Y.forEach(b),D=B(g),F(V.$$.fragment,g),h=B(g),g.forEach(b),this.h()},h(){ee(t.src,s=a[8].image_url)||I(t,"src",s),I(t,"alt",l=a[8].name),I(t,"class","w-full h-48 object-cover object-center mb-4 rounded-xl"),I(r,"class","text-lg font-semibold"),I(d,"class","text-xl font-bold mt-2"),I(c,"class",M="inline-block mt-2 px-3 py-1 text-sm rounded-full "+(a[8].status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600")),I(e,"class","border rounded-xl p-4 shadow hover:shadow-lg transition")},m(C,g){S(C,e,g),$(e,t),$(e,u),$(e,r),$(r,o),$(e,k),$(e,d),$(d,m),$(d,w),$(e,_),$(e,c),$(c,f),$(e,D),X(V,e,null),$(e,h),n=!0},p(C,g){a=C,(!n||g&1&&!ee(t.src,s=a[8].image_url))&&I(t,"src",s),(!n||g&1&&l!==(l=a[8].name))&&I(t,"alt",l),(!n||g&1)&&i!==(i=a[8].name+"")&&G(o,i),(!n||g&1)&&v!==(v=a[8].price+"")&&G(w,v),(!n||g&1)&&P!==(P=a[8].status+"")&&G(f,P),(!n||g&1&&M!==(M="inline-block mt-2 px-3 py-1 text-sm rounded-full "+(a[8].status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600")))&&I(c,"class",M);const O={};g&2048&&(O.$$scope={dirty:g,ctx:a}),V.$set(O)},i(C){n||(y(V.$$.fragment,C),n=!0)},o(C){N(V.$$.fragment,C),n=!1},d(C){C&&b(e),U(V)}}}function ne(a){let e,t,s,l,u,r=a[0].page+"",i,o,k=a[0].totalPages+"",d,m,v,w;return t=new K({props:{ui_button_styles:"border px-4 py-2 rounded disabled:opacity-50",disabled:a[0].page<=1,$$slots:{default:[be]},$$scope:{ctx:a}}}),t.$on("click",a[6]),v=new K({props:{ui_button_styles:"border px-4 py-2 rounded disabled:opacity-50",disabled:a[0].page>=a[0].totalPages,$$slots:{default:[ve]},$$scope:{ctx:a}}}),v.$on("click",a[7]),{c(){e=z("div"),J(t.$$.fragment),s=A(),l=z("span"),u=E("Page "),i=E(r),o=E(" of "),d=E(k),m=A(),J(v.$$.fragment),this.h()},l(_){e=q(_,"DIV",{class:!0});var c=H(e);F(t.$$.fragment,c),s=B(c),l=q(c,"SPAN",{class:!0});var P=H(l);u=j(P,"Page "),i=j(P,r),o=j(P," of "),d=j(P,k),P.forEach(b),m=B(c),F(v.$$.fragment,c),c.forEach(b),this.h()},h(){I(l,"class","px-4 py-2"),I(e,"class","flex justify-center gap-4 mt-10")},m(_,c){S(_,e,c),X(t,e,null),$(e,s),$(e,l),$(l,u),$(l,i),$(l,o),$(l,d),$(e,m),X(v,e,null),w=!0},p(_,c){const P={};c&1&&(P.disabled=_[0].page<=1),c&2048&&(P.$$scope={dirty:c,ctx:_}),t.$set(P),(!w||c&1)&&r!==(r=_[0].page+"")&&G(i,r),(!w||c&1)&&k!==(k=_[0].totalPages+"")&&G(d,k);const f={};c&1&&(f.disabled=_[0].page>=_[0].totalPages),c&2048&&(f.$$scope={dirty:c,ctx:_}),v.$set(f)},i(_){w||(y(t.$$.fragment,_),y(v.$$.fragment,_),w=!0)},o(_){N(t.$$.fragment,_),N(v.$$.fragment,_),w=!1},d(_){_&&b(e),U(t),U(v)}}}function be(a){let e;return{c(){e=E("Previous")},l(t){e=j(t,"Previous")},m(t,s){S(t,e,s)},d(t){t&&b(e)}}}function ve(a){let e;return{c(){e=E("Next")},l(t){e=j(t,"Next")},m(t,s){S(t,e,s)},d(t){t&&b(e)}}}function ke(a){let e,t="Products",s,l,u,r,i,o,k,d,m,v,w,_,c,P;i=new K({props:{ui_button_styles:we,$$slots:{default:[de]},$$scope:{ctx:a}}}),i.$on("click",a[3]);let f=a[0].searchId&&se(a);const M=[he,me],D=[];function V(n,p){return n[0].products.length===0?0:1}d=V(a),m=D[d]=M[d](a);let h=!a[0].searchId&&ne(a);return{c(){e=z("h1"),e.textContent=t,s=A(),l=z("div"),u=z("input"),r=A(),J(i.$$.fragment),o=A(),f&&f.c(),k=A(),m.c(),v=A(),h&&h.c(),w=x(),this.h()},l(n){e=q(n,"H1",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-11rnh0f"&&(e.textContent=t),s=B(n),l=q(n,"DIV",{class:!0});var p=H(l);u=q(p,"INPUT",{class:!0,placeholder:!0}),r=B(p),F(i.$$.fragment,p),o=B(p),f&&f.l(p),p.forEach(b),k=B(n),m.l(n),v=B(n),h&&h.l(n),w=x(),this.h()},h(){I(e,"class","text-3xl font-bold mb-6"),I(u,"class","border p-2 rounded w-64"),I(u,"placeholder","Search by product ID"),I(l,"class","flex gap-4 mb-6")},m(n,p){S(n,e,p),S(n,s,p),S(n,l,p),$(l,u),Z(u,a[1]),$(l,r),X(i,l,null),$(l,o),f&&f.m(l,null),S(n,k,p),D[d].m(n,p),S(n,v,p),h&&h.m(n,p),S(n,w,p),_=!0,c||(P=ie(u,"input",a[2]),c=!0)},p(n,[p]){p&2&&u.value!==n[1]&&Z(u,n[1]);const C={};p&2048&&(C.$$scope={dirty:p,ctx:n}),i.$set(C),n[0].searchId?f?(f.p(n,p),p&1&&y(f,1)):(f=se(n),f.c(),y(f,1),f.m(l,null)):f&&(Q(),N(f,1,1,()=>{f=null}),L());let g=d;d=V(n),d===g?D[d].p(n,p):(Q(),N(D[g],1,1,()=>{D[g]=null}),L(),m=D[d],m?m.p(n,p):(m=D[d]=M[d](n),m.c()),y(m,1),m.m(v.parentNode,v)),n[0].searchId?h&&(Q(),N(h,1,1,()=>{h=null}),L()):h?(h.p(n,p),p&1&&y(h,1)):(h=ne(n),h.c(),y(h,1),h.m(w.parentNode,w))},i(n){_||(y(i.$$.fragment,n),y(f),y(m),y(h),_=!0)},o(n){N(i.$$.fragment,n),N(f),N(m),N(h),_=!1},d(n){n&&(b(e),b(s),b(l),b(k),b(v),b(w)),U(i),f&&f.d(),D[d].d(n),h&&h.d(n),c=!1,P()}}}const we="bg-black text-white px-4 rounded",Pe="border px-4 rounded";function Ie(a,e,t){let{data:s}=e,l="";function u(){l=this.value,t(1,l)}const r=()=>T(`/?product_id=${l}`),i=()=>T("/"),o=m=>T(`/products/${m.id}`),k=()=>T(`/?page=${s.page-1}`),d=()=>T(`/?page=${s.page+1}`);return a.$$set=m=>{"data"in m&&t(0,s=m.data)},[s,l,u,r,i,o,k,d]}class De extends ce{constructor(e){super(),fe(this,e,Ie,ke,oe,{data:0})}}export{De as component,Ee as universal};
