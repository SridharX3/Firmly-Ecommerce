import{s as ce,d as _,l as O,i as N,m as d,a as g,c as A,g as oe,b as q,q as B,r as S,f as E,h as I,t as D,o as ue,n as Z,k as fe,v as te,p as de}from"../chunks/C0j6wI00.js";import{S as _e,i as pe,d as U,t as z,a as T,c as ne,m as X,b as Y,e as J,g as re}from"../chunks/CSS4gbkW.js";import{e as le}from"../chunks/D6YF6ztN.js";import{B as K}from"../chunks/CfZhOsrX.js";import{a as me,P as he}from"../chunks/B7eymPUq.js";import{b as ge}from"../chunks/BGipdwkA.js";function se(l,e,s){const a=l.slice();return a[10]=e[s],a}function $e(l){let e,s,a=le(l[0]),t=[];for(let i=0;i<a.length;i+=1)t[i]=ae(se(l,a,i));const f=i=>z(t[i],1,1,()=>{t[i]=null});return{c(){e=E("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=A(i,"DIV",{class:!0});var r=B(e);for(let o=0;o<t.length;o+=1)t[o].l(r);r.forEach(_),this.h()},h(){g(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6")},m(i,r){N(i,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);s=!0},p(i,r){if(r&49){a=le(i[0]);let o;for(o=0;o<a.length;o+=1){const $=se(i,a,o);t[o]?(t[o].p($,r),T(t[o],1)):(t[o]=ae($),t[o].c(),T(t[o],1),t[o].m(e,null))}for(re(),o=a.length;o<t.length;o+=1)f(o);ne()}},i(i){if(!s){for(let r=0;r<a.length;r+=1)T(t[r]);s=!0}},o(i){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)z(t[r]);s=!1},d(i){i&&_(e),fe(t,i)}}}function be(l){let e,s="Loading...";return{c(){e=E("p"),e.textContent=s},l(a){e=A(a,"P",{"data-svelte-h":!0}),oe(e)!=="svelte-qdsr2u"&&(e.textContent=s)},m(a,t){N(a,e,t)},p:Z,i:Z,o:Z,d(a){a&&_(e)}}}function ve(l){let e=l[4].has(l[10].id)?"Adding...":"Add to Cart",s;return{c(){s=D(e)},l(a){s=S(a,e)},m(a,t){N(a,s,t)},p(a,t){t&17&&e!==(e=a[4].has(a[10].id)?"Adding...":"Add to Cart")&&O(s,e)},d(a){a&&_(s)}}}function ke(l){let e;return{c(){e=D("View Details")},l(s){e=S(s,"View Details")},m(s,a){N(s,e,a)},d(s){s&&_(e)}}}function ae(l){let e,s,a,t,f,i,r,o=l[10].name+"",$,b,k,j,p=l[10].price+"",v,F,h,y=l[10].status+"",G,C,V,n,c,m,H,w,Q,x;function ie(){return l[8](l[10])}return n=new K({props:{ui_button_styles:Ce,disabled:l[10].status!=="active"||l[4].has(l[10].id),$$slots:{default:[ve]},$$scope:{ctx:l}}}),n.$on("click",ie),m=new K({props:{href:`/products/${l[10].id}`,ui_button_styles:"block text-center border py-2 rounded",$$slots:{default:[ke]},$$scope:{ctx:l}}}),{c(){e=E("div"),s=E("div"),a=E("img"),i=I(),r=E("h2"),$=D(o),b=I(),k=E("p"),j=D("$"),v=D(p),F=I(),h=E("span"),G=D(y),C=I(),V=E("div"),J(n.$$.fragment),c=I(),J(m.$$.fragment),H=I(),this.h()},l(P){e=A(P,"DIV",{class:!0});var u=B(e);s=A(u,"DIV",{class:!0});var M=B(s);a=A(M,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),M.forEach(_),i=q(u),r=A(u,"H2",{class:!0});var L=B(r);$=S(L,o),L.forEach(_),b=q(u),k=A(u,"P",{class:!0});var W=B(k);j=S(W,"$"),v=S(W,p),W.forEach(_),F=q(u),h=A(u,"SPAN",{class:!0});var ee=B(h);G=S(ee,y),ee.forEach(_),C=q(u),V=A(u,"DIV",{class:!0});var R=B(V);Y(n.$$.fragment,R),c=q(R),Y(m.$$.fragment,R),R.forEach(_),H=q(u),u.forEach(_),this.h()},h(){te(a.src,t=l[10].image_url||"https://via.placeholder.com/150")||g(a,"src",t),g(a,"alt",f=l[10].name),g(a,"class","w-full h-full object-contain"),g(a,"loading","lazy"),g(s,"class","h-48 bg-gray-100 rounded-lg mb-4 overflow-hidden flex items-center justify-center p-2"),g(r,"class","font-semibold text-lg"),g(k,"class","text-gray-700 mt-1"),g(h,"class","text-sm text-gray-500 capitalize mt-1"),g(V,"class","mt-auto space-y-2 pt-4"),g(e,"class","border rounded-xl p-4 shadow hover:shadow-lg transition flex flex-col")},m(P,u){N(P,e,u),d(e,s),d(s,a),d(e,i),d(e,r),d(r,$),d(e,b),d(e,k),d(k,j),d(k,v),d(e,F),d(e,h),d(h,G),d(e,C),d(e,V),X(n,V,null),d(V,c),X(m,V,null),d(e,H),w=!0,Q||(x=de(a,"error",Ae),Q=!0)},p(P,u){l=P,(!w||u&1&&!te(a.src,t=l[10].image_url||"https://via.placeholder.com/150"))&&g(a,"src",t),(!w||u&1&&f!==(f=l[10].name))&&g(a,"alt",f),(!w||u&1)&&o!==(o=l[10].name+"")&&O($,o),(!w||u&1)&&p!==(p=l[10].price+"")&&O(v,p),(!w||u&1)&&y!==(y=l[10].status+"")&&O(G,y);const M={};u&17&&(M.disabled=l[10].status!=="active"||l[4].has(l[10].id)),u&8209&&(M.$$scope={dirty:u,ctx:l}),n.$set(M);const L={};u&1&&(L.href=`/products/${l[10].id}`),u&8192&&(L.$$scope={dirty:u,ctx:l}),m.$set(L)},i(P){w||(T(n.$$.fragment,P),T(m.$$.fragment,P),w=!0)},o(P){z(n.$$.fragment,P),z(m.$$.fragment,P),w=!1},d(P){P&&_(e),U(n),U(m),Q=!1,x()}}}function we(l){let e;return{c(){e=D("Previous")},l(s){e=S(s,"Previous")},m(s,a){N(s,e,a)},d(s){s&&_(e)}}}function Pe(l){let e;return{c(){e=D("Next")},l(s){e=S(s,"Next")},m(s,a){N(s,e,a)},d(s){s&&_(e)}}}function ye(l){let e,s="Products",a,t,f,i,r,o,$,b,k,j,p,v,F,h,y;const G=[be,$e],C=[];function V(n,c){return n[3]?0:1}return t=V(l),f=C[t]=G[t](l),o=new K({props:{disabled:l[1]===1,ui_button_styles:"px-4 py-2 border rounded disabled:opacity-50",$$slots:{default:[we]},$$scope:{ctx:l}}}),o.$on("click",l[7]),h=new K({props:{disabled:l[1]===l[2],ui_button_styles:"px-4 py-2 border rounded disabled:opacity-50",$$slots:{default:[Pe]},$$scope:{ctx:l}}}),h.$on("click",l[6]),{c(){e=E("h1"),e.textContent=s,a=I(),f.c(),i=I(),r=E("div"),J(o.$$.fragment),$=I(),b=E("span"),k=D("Page "),j=D(l[1]),p=D(" of "),v=D(l[2]),F=I(),J(h.$$.fragment),this.h()},l(n){e=A(n,"H1",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-11rnh0f"&&(e.textContent=s),a=q(n),f.l(n),i=q(n),r=A(n,"DIV",{class:!0});var c=B(r);Y(o.$$.fragment,c),$=q(c),b=A(c,"SPAN",{});var m=B(b);k=S(m,"Page "),j=S(m,l[1]),p=S(m," of "),v=S(m,l[2]),m.forEach(_),F=q(c),Y(h.$$.fragment,c),c.forEach(_),this.h()},h(){g(e,"class","text-3xl font-bold mb-6"),g(r,"class","flex justify-between items-center mt-10")},m(n,c){N(n,e,c),N(n,a,c),C[t].m(n,c),N(n,i,c),N(n,r,c),X(o,r,null),d(r,$),d(r,b),d(b,k),d(b,j),d(b,p),d(b,v),d(r,F),X(h,r,null),y=!0},p(n,[c]){let m=t;t=V(n),t===m?C[t].p(n,c):(re(),z(C[m],1,1,()=>{C[m]=null}),ne(),f=C[t],f?f.p(n,c):(f=C[t]=G[t](n),f.c()),T(f,1),f.m(i.parentNode,i));const H={};c&2&&(H.disabled=n[1]===1),c&8192&&(H.$$scope={dirty:c,ctx:n}),o.$set(H),(!y||c&2)&&O(j,n[1]),(!y||c&4)&&O(v,n[2]);const w={};c&6&&(w.disabled=n[1]===n[2]),c&8192&&(w.$$scope={dirty:c,ctx:n}),h.$set(w)},i(n){y||(T(f),T(o.$$.fragment,n),T(h.$$.fragment,n),y=!0)},o(n){z(f),z(o.$$.fragment,n),z(h.$$.fragment,n),y=!1},d(n){n&&(_(e),_(a),_(i),_(r)),C[t].d(n),U(o),U(h)}}}const Ce="w-full bg-black text-white py-2 rounded disabled:opacity-50",Ae=l=>l.target.src="https://via.placeholder.com/150";function Ee(l,e,s){let a=[],t=1,f=1,i=!1,r=new Set;async function o(){s(3,i=!0);const p=await me(`${he}/products`,{headers:{"X-Page":String(t)}});s(0,a=p.data),s(2,f=p.totalPages),s(3,i=!1)}async function $(p){s(4,r=new Set(r).add(p));try{await ge(p,1),console.log("Added to cart:",p)}catch(v){v.message.includes("not logged in")?confirm("You need to log in to add items to your cart. Go to login page?")&&(window.location.href="/login"):alert("Failed to add item to cart")}finally{const v=new Set(r);v.delete(p),s(4,r=v)}}function b(){t<f&&(s(1,t++,t),o())}function k(){t>1&&(s(1,t--,t),o())}return ue(o),[a,t,f,i,r,$,b,k,p=>$(p.id)]}class je extends _e{constructor(e){super(),pe(this,e,Ee,ye,ce,{})}}export{je as component};
